version: "3.9"
services:
  api:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    ports: ["8000:8000"]
    env_file: ../config/.env
    volumes:
      - ../config:/app/config:ro
      - chroma_data:/app/chroma_data
    depends_on: [redis]
  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
volumes:
  chroma_data:
  redis_data: