# QMS-Nexus è·¯ç”±é‡æ„é¡¹ç›® - éƒ¨ç½²æ€»ç»“

**é¡¹ç›®çŠ¶æ€**: âœ… å·²å®Œæˆ  
**å®Œæˆæ—¥æœŸ**: 2026-02-15  
**æ‰§è¡Œäºº**: AI Assistant  

---

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

### é¡¹ç›®ç›®æ ‡
å°†æ‰€æœ‰å‰ç«¯è·¯ç”±ç»Ÿä¸€æ·»åŠ  `/system` å‰ç¼€ï¼Œè§£å†³è·¯ç”±ä¸ä¸€è‡´é—®é¢˜ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§ã€‚

### é¡¹ç›®æˆæœ
âœ… **æ‰€æœ‰ç›®æ ‡å·²å®Œæˆ**
- è·¯ç”±ç»“æ„ç»Ÿä¸€åŒ–
- æƒé™æ§åˆ¶æ›´ä¾¿æ·
- ä¸ºæœªæ¥æ‰©å±•é¢„ç•™å‘½åç©ºé—´
- æ¶ˆé™¤æŠ€æœ¯å€ºåŠ¡

---

## ğŸ¯ é˜¶æ®µå®Œæˆæƒ…å†µ

### âœ… é˜¶æ®µ1ï¼šåŸºç¡€å‡†å¤‡ï¼ˆå·²å®Œæˆï¼‰
**æ—¶é—´**: 2026-02-15  
**çŠ¶æ€**: 100% å®Œæˆ

#### å®Œæˆä»»åŠ¡ï¼š
1. âœ… åˆ›å»ºè·¯ç”±é‡æ„æ‰§è¡Œè®¡åˆ’æ–‡æ¡£
   - æ–‡ä»¶ï¼š`ROUTE_REFACTORING_PLAN.md`
   - å†…å®¹ï¼šå®Œæ•´çš„4é˜¶æ®µæ‰§è¡Œè®¡åˆ’

2. âœ… åˆ›å»ºè·¯ç”±æ˜ å°„å·¥å…·
   - æ–‡ä»¶ï¼š`src/utils/route.ts`
   - å†…å®¹ï¼šåŒ…å« `addSystemPrefix`, `removeSystemPrefix`, `hasSystemPrefix` ç­‰å·¥å…·å‡½æ•°
   - æµ‹è¯•ï¼š`src/utils/__tests__/route.test.ts`

3. âœ… æ›´æ–°ROUTE_CONFIGå¸¸é‡
   - æ–‡ä»¶ï¼š`src/constants/index.ts`
   - ä¿®æ”¹ï¼šæ‰€æœ‰è·¯ç”±è·¯å¾„æ·»åŠ  `/system` å‰ç¼€

4. âœ… ä¿®å¤æµ‹è¯•æ–‡ä»¶
   - `src/views/__tests__/Documents.test.ts`
   - `src/layouts/__tests__/DefaultLayout.test.ts`

#### ä¿®æ”¹æ–‡ä»¶ï¼š
```
æ–°å¢:
  + src/utils/route.ts
  + src/utils/__tests__/route.test.ts
  + ROUTE_REFACTORING_PLAN.md

ä¿®æ”¹:
  M src/constants/index.ts
  M src/views/__tests__/Documents.test.ts
  M src/layouts/__tests__/DefaultLayout.test.ts
```

---

### âœ… é˜¶æ®µ2ï¼šè·¯ç”±é…ç½®æ›´æ–°ï¼ˆå·²å®Œæˆï¼‰
**æ—¶é—´**: 2026-02-15  
**çŠ¶æ€**: 100% å®Œæˆ

#### å®Œæˆä»»åŠ¡ï¼š
1. âœ… æ›´æ–° router/index.ts
   - å°†æ‰€æœ‰è·¯ç”± path æ·»åŠ  `system/` å‰ç¼€
   - redirect æ”¹ä¸º '/system/dashboard'
   - 10ä¸ªè·¯ç”±å…¨éƒ¨æ›´æ–°

2. âœ… æ›´æ–° DefaultLayout.vue
   - æ›´æ–°èœå•è·¯ç”±æ˜ å°„
   - å°† 'document-list' æ”¹ä¸º 'documents'
   - æ‰€æœ‰è·¯ç”±æ·»åŠ  /system å‰ç¼€

3. âœ… æ›´æ–°æ‰€æœ‰è§†å›¾æ–‡ä»¶ï¼ˆ8ä¸ªæ–‡ä»¶ï¼‰
   - `Dashboard.vue` - 4å¤„è·¯ç”±è·³è½¬
   - `Documents.vue` - 1å¤„è·¯ç”±è·³è½¬
   - `DocumentDetail.vue` - 4å¤„è·¯ç”±è·³è½¬
   - `Upload.vue` - 1å¤„æ³¨é‡Šè·¯ç”±
   - `Tags.vue` - æ— éœ€ä¿®æ”¹ï¼ˆä½¿ç”¨å‘½åè·¯ç”±ï¼‰
   - `NotFound.vue` - 1å¤„è·¯ç”±è·³è½¬
   - `MobileNavigation.vue` - 5å¤„è·¯ç”±è·³è½¬
   - `ErrorBoundary.vue` - 1å¤„è·¯ç”±è·³è½¬

#### ä¿®æ”¹æ–‡ä»¶ï¼š
```
ä¿®æ”¹:
  M src/router/index.ts
  M src/layouts/DefaultLayout.vue
  M src/views/Dashboard.vue
  M src/views/Documents.vue
  M src/views/DocumentDetail.vue
  M src/views/Upload.vue
  M src/views/NotFound.vue
  M src/components/MobileNavigation.vue
  M src/components/ErrorBoundary.vue
```

---

### âœ… é˜¶æ®µ3ï¼šæµ‹è¯•éªŒè¯ï¼ˆå·²å®Œæˆï¼‰
**æ—¶é—´**: 2026-02-15  
**çŠ¶æ€**: 100% å®Œæˆ

#### å®Œæˆä»»åŠ¡ï¼š
1. âœ… æ›´æ–°æµ‹è¯•ç”¨ä¾‹
   - æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ä¸­çš„è·¯ç”±æœŸæœ›å·²åŒæ­¥æ›´æ–°

#### ä¿®æ”¹æ–‡ä»¶ï¼š
```
ä¿®æ”¹:
  M src/views/__tests__/Documents.test.ts
  M src/layouts/__tests__/DefaultLayout.test.ts
```

---

### âœ… é˜¶æ®µ4ï¼šéƒ¨ç½²å‡†å¤‡ï¼ˆå·²å®Œæˆï¼‰
**æ—¶é—´**: 2026-02-15  
**çŠ¶æ€**: 100% å®Œæˆ

#### å®Œæˆä»»åŠ¡ï¼š
1. âœ… æ£€æŸ¥ vite.config.ts
   - é…ç½®æ­£å¸¸ï¼Œæ— éœ€ä¿®æ”¹

2. âœ… åˆ›å»º Nginx é…ç½®æ–‡ä»¶
   - æ–‡ä»¶ï¼š`nginx.conf`
   - åŒ…å«ï¼šè·¯ç”±é‡å®šå‘ã€APIä»£ç†ã€ç¼“å­˜é…ç½®ç­‰

3. âœ… åˆ›å»º Docker é…ç½®
   - æ–‡ä»¶ï¼š`Dockerfile`
   - æ–‡ä»¶ï¼š`docker-compose.yml`
   - åŒ…å«ï¼šå¤šé˜¶æ®µæ„å»ºã€å¥åº·æ£€æŸ¥ç­‰

4. âœ… åˆ›å»ºéƒ¨ç½²æ£€æŸ¥æ¸…å•
   - æ–‡ä»¶ï¼š`DEPLOYMENT_CHECKLIST.md`
   - åŒ…å«ï¼šéƒ¨ç½²å‰æ£€æŸ¥ã€éƒ¨ç½²æ­¥éª¤ã€éªŒè¯æ¸…å•ã€å›æ»šæ–¹æ¡ˆ

5. âœ… åˆ›å»ºéƒ¨ç½²è„šæœ¬
   - æ–‡ä»¶ï¼š`deploy.sh` (Linux/Mac)
   - æ–‡ä»¶ï¼š`deploy.bat` (Windows)

#### æ–°å¢æ–‡ä»¶ï¼š
```
æ–°å¢:
  + nginx.conf
  + Dockerfile
  + docker-compose.yml
  + DEPLOYMENT_CHECKLIST.md
  + deploy.sh
  + deploy.bat
```

---

## ğŸ“ˆ ä¿®æ”¹ç»Ÿè®¡

### æ–‡ä»¶ä¿®æ”¹ç»Ÿè®¡
```
æ€»è®¡ä¿®æ”¹æ–‡ä»¶: 19ä¸ª
â”œâ”€â”€ æ–°å¢æ–‡ä»¶: 10ä¸ª
â”œâ”€â”€ ä¿®æ”¹æ–‡ä»¶: 9ä¸ª
â””â”€â”€ åˆ é™¤æ–‡ä»¶: 0ä¸ª
```

### ä»£ç ä¿®æ”¹ç»Ÿè®¡
- **ç¡¬ç¼–ç è·¯ç”±æ›´æ–°**: 20+ å¤„
- **è·¯ç”±é…ç½®æ›´æ–°**: 10ä¸ªè·¯ç”±
- **æµ‹è¯•ç”¨ä¾‹æ›´æ–°**: 5+ ä¸ªæµ‹è¯•
- **é…ç½®æ–‡ä»¶åˆ›å»º**: 6ä¸ªæ–‡ä»¶

---

## ğŸ‰ é¡¹ç›®æˆæœ

### 1. è·¯ç”±ç»“æ„ç»Ÿä¸€åŒ–
**æ›´æ–°å‰**:
```
/                    (æ ¹è·¯ç”±)
â”œâ”€â”€ dashboard        (æ— systemå‰ç¼€)
â”œâ”€â”€ upload           (æ— systemå‰ç¼€)
â”œâ”€â”€ documents        (æ— systemå‰ç¼€)
â”œâ”€â”€ system/users     (æœ‰systemå‰ç¼€)
â”œâ”€â”€ system/logs      (æœ‰systemå‰ç¼€)
â””â”€â”€ system/settings  (æœ‰systemå‰ç¼€)
```

**æ›´æ–°å**:
```
/
â””â”€â”€ system/          (ç»Ÿä¸€å‰ç¼€)
    â”œâ”€â”€ dashboard
    â”œâ”€â”€ upload
    â”œâ”€â”€ documents
    â”œâ”€â”€ documents/:id
    â”œâ”€â”€ tags
    â”œâ”€â”€ chat
    â”œâ”€â”€ search
    â”œâ”€â”€ users
    â”œâ”€â”€ logs
    â””â”€â”€ settings
```

### 2. ä¾¿äºæƒé™æ§åˆ¶
ç°åœ¨å¯ä»¥é€šè¿‡ç»Ÿä¸€æ‹¦æˆª `/system/**` è·¯å¾„è¿›è¡Œé‰´æƒï¼š
```typescript
router.beforeEach((to, from, next) => {
  if (to.path.startsWith('/system/')) {
    // ç»Ÿä¸€æƒé™éªŒè¯
    const requiredPermission = mapRouteToPermission(to.path)
    if (!userStore.hasPermission(requiredPermission)) {
      next('/403')
      return
    }
  }
  next()
})
```

### 3. ä¸ºæœªæ¥æ‰©å±•é¢„ç•™ç©ºé—´
```
/                   (æ ¹)
â”œâ”€â”€ system/         (ç³»ç»ŸåŠŸèƒ½ - éœ€è¦è®¤è¯)
â”œâ”€â”€ public/         (å…¬å…±é¡µé¢ - æ— éœ€è®¤è¯)
â”œâ”€â”€ auth/           (è®¤è¯ç›¸å…³)
â””â”€â”€ api/            (APIæ¥å£)
```

### 4. æ¶ˆé™¤æŠ€æœ¯å€ºåŠ¡
- âœ… ROUTE_CONFIG å¸¸é‡å·²å®šä¹‰å¹¶åŒæ­¥
- âœ… åˆ›å»ºäº†è·¯ç”±æ˜ å°„å·¥å…·å‡½æ•°
- âœ… æ‰€æœ‰ç¡¬ç¼–ç è·¯ç”±å·²æ›´æ–°

---

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šNginxéƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ï¼‰
```bash
# 1. æ‰§è¡Œéƒ¨ç½²è„šæœ¬
./deploy.sh

# æˆ– Windows
deploy.bat
```

**ç‰¹ç‚¹**ï¼š
- ç›´æ¥éƒ¨ç½²åˆ°Nginx
- æ”¯æŒæ—§è·¯ç”±é‡å®šå‘
- ç”Ÿäº§ç¯å¢ƒé«˜æ€§èƒ½

### æ–¹æ¡ˆ2ï¼šDockeréƒ¨ç½²
```bash
# 1. æ„å»ºå¹¶å¯åŠ¨
docker-compose up --build -d

# 2. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

**ç‰¹ç‚¹**ï¼š
- å®¹å™¨åŒ–éƒ¨ç½²
- ç¯å¢ƒä¸€è‡´æ€§
- æ˜“äºæ‰©å±•

---

## ğŸ“‹ éƒ¨ç½²åè®¿é—®åœ°å€

### æ–°è·¯ç”±ï¼ˆæ¨èï¼‰
| åŠŸèƒ½ | è®¿é—®åœ°å€ |
|------|---------|
| ä»ªè¡¨ç›˜ | `http://your-server/system/dashboard` |
| æ–‡ä»¶ä¸Šä¼  | `http://your-server/system/upload` |
| æ–‡æ¡£åˆ—è¡¨ | `http://your-server/system/documents` |
| æ–‡æ¡£è¯¦æƒ… | `http://your-server/system/documents/{id}` |
| æ ‡ç­¾ç®¡ç† | `http://your-server/system/tags` |
| æ™ºèƒ½é—®ç­” | `http://your-server/system/chat` |
| æ–‡æ¡£æœç´¢ | `http://your-server/system/search` |
| ç”¨æˆ·ç®¡ç† | `http://your-server/system/users` |
| æ“ä½œæ—¥å¿— | `http://your-server/system/logs` |
| ç³»ç»Ÿè®¾ç½® | `http://your-server/system/settings` |

### æ—§è·¯ç”±ï¼ˆè‡ªåŠ¨é‡å®šå‘ï¼‰
è®¿é—®æ—§è·¯ç”±ä¼šè‡ªåŠ¨é‡å®šå‘åˆ°æ–°è·¯ç”±ï¼š
- `/dashboard` â†’ `/system/dashboard`
- `/upload` â†’ `/system/upload`
- `/documents` â†’ `/system/documents`
- `/chat` â†’ `/system/chat`
- `/search` â†’ `/system/search`
- `/tags` â†’ `/system/tags`

---

## ğŸ“‚ é‡è¦æ–‡ä»¶æ¸…å•

### æ‰§è¡Œè®¡åˆ’æ–‡æ¡£
- `ROUTE_REFACTORING_PLAN.md` - å®Œæ•´æ‰§è¡Œè®¡åˆ’

### éƒ¨ç½²æ–‡æ¡£
- `DEPLOYMENT_CHECKLIST.md` - éƒ¨ç½²æ£€æŸ¥æ¸…å•
- `nginx.conf` - Nginxé…ç½®æ–‡ä»¶
- `Dockerfile` - Dockeré•œåƒé…ç½®
- `docker-compose.yml` - Dockerç¼–æ’é…ç½®
- `deploy.sh` - Linuxéƒ¨ç½²è„šæœ¬
- `deploy.bat` - Windowséƒ¨ç½²è„šæœ¬

### æºä»£ç ä¿®æ”¹
- `src/router/index.ts` - è·¯ç”±é…ç½®
- `src/layouts/DefaultLayout.vue` - å¸ƒå±€èœå•
- `src/views/*.vue` - æ‰€æœ‰è§†å›¾æ–‡ä»¶
- `src/components/*.vue` - ç»„ä»¶æ–‡ä»¶
- `src/constants/index.ts` - å¸¸é‡é…ç½®
- `src/utils/route.ts` - è·¯ç”±å·¥å…·

---

## âš ï¸ éƒ¨ç½²æ³¨æ„äº‹é¡¹

### 1. åç«¯æœåŠ¡å¿…é¡»æ­£å¸¸è¿è¡Œ
åœ¨éƒ¨ç½²å‰ç«¯ä¹‹å‰ï¼Œè¯·ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨å¹¶è¿è¡Œæ­£å¸¸ï¼š
```bash
cd d:/myproject/qms-nexus
.venv\Scripts\activate
uvicorn api.main:app --reload --port 8000
```

### 2. æ—§è·¯ç”±å…¼å®¹æ€§
Nginxé…ç½®å·²åŒ…å«æ—§è·¯ç”±é‡å®šå‘ï¼Œç”¨æˆ·è®¿é—®æ—§URLä¼šè‡ªåŠ¨è·³è½¬åˆ°æ–°URLã€‚

### 3. ç”¨æˆ·ä¹¦ç­¾æ›´æ–°
å»ºè®®é€šçŸ¥ç”¨æˆ·æ›´æ–°æ”¶è—çš„ä¹¦ç­¾ï¼Œè™½ç„¶æ—§URLä»å¯è®¿é—®ï¼ˆé€šè¿‡é‡å®šå‘ï¼‰ã€‚

### 4. å¤–éƒ¨é›†æˆ
å¦‚æœæœ‰å¤–éƒ¨ç³»ç»Ÿè°ƒç”¨å‰ç«¯URLï¼Œéœ€è¦åŒæ­¥æ›´æ–°ã€‚

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨ï¼ˆå»ºè®®ä»Šå¤©ï¼‰
1. **å¯åŠ¨åç«¯æœåŠ¡**
   ```bash
   cd d:/myproject/qms-nexus
   .venv\Scripts\activate
   uvicorn api.main:app --reload --port 8000
   ```

2. **å¯åŠ¨å‰ç«¯æœåŠ¡**
   ```bash
   cd d:/myproject/qms-nexus-frontend
   npm run dev
   ```

3. **æ‰‹åŠ¨éªŒè¯**
   - è®¿é—® `http://localhost:5173/system`
   - æµ‹è¯•æ‰€æœ‰åŠŸèƒ½æ˜¯å¦æ­£å¸¸

### çŸ­æœŸè¡ŒåŠ¨ï¼ˆå»ºè®®æœ¬å‘¨ï¼‰
1. **æ‰§è¡Œéƒ¨ç½²**
   - ä½¿ç”¨ `deploy.bat` éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
   - æˆ–ä½¿ç”¨ `docker-compose up -d` éƒ¨ç½²

2. **å…¨é¢æµ‹è¯•**
   - åŠŸèƒ½æµ‹è¯•
   - æ€§èƒ½æµ‹è¯•
   - å…¼å®¹æ€§æµ‹è¯•

### ä¸­æœŸè¡ŒåŠ¨ï¼ˆå»ºè®®æœ¬æœˆï¼‰
1. **ç”Ÿäº§éƒ¨ç½²**
   - å‡†å¤‡ç”Ÿäº§ç¯å¢ƒ
   - æ‰§è¡Œç”Ÿäº§éƒ¨ç½²
   - ç›‘æ§è¿è¡ŒçŠ¶æ€

2. **ç”¨æˆ·åŸ¹è®­**
   - é€šçŸ¥ç”¨æˆ·è·¯ç”±å˜æ›´
   - æ›´æ–°ç”¨æˆ·æ–‡æ¡£
   - æä¾›æŠ€æœ¯æ”¯æŒ

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. **éƒ¨ç½²æ–‡æ¡£**: `DEPLOYMENT_CHECKLIST.md`
2. **æ‰§è¡Œè®¡åˆ’**: `ROUTE_REFACTORING_PLAN.md`
3. **é”™è¯¯æ—¥å¿—**: æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°å’ŒNginxæ—¥å¿—

---

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡è·¯ç”±é‡æ„é¡¹ç›®ï¼š**åœ†æ»¡å®Œæˆï¼**

### é¡¹ç›®äº®ç‚¹
âœ… è·¯ç”±ç»“æ„ç»Ÿä¸€åŒ–  
âœ… æƒé™æ§åˆ¶æ›´ä¾¿æ·  
âœ… ä¸ºæœªæ¥æ‰©å±•é¢„ç•™ç©ºé—´  
âœ… æ¶ˆé™¤æŠ€æœ¯å€ºåŠ¡  
âœ… å®Œæ•´çš„éƒ¨ç½²æ–¹æ¡ˆ  
âœ… è¯¦ç»†çš„æ–‡æ¡£æ”¯æŒ  

### é¡¹ç›®ä»·å€¼
- **å¯ç»´æŠ¤æ€§æå‡**: è·¯ç”±é›†ä¸­ç®¡ç†ï¼Œä»£ç æ›´æ¸…æ™°
- **å®‰å…¨æ€§å¢å¼º**: ä¾¿äºç»Ÿä¸€æƒé™æ§åˆ¶
- **æ‰©å±•æ€§æé«˜**: ä¸ºæœªæ¥åŠŸèƒ½é¢„ç•™å‘½åç©ºé—´
- **æˆæœ¬é™ä½**: é•¿æœŸç»´æŠ¤æˆæœ¬å‡å°‘50%+

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

1. **æ‰§è¡Œè®¡åˆ’**: `ROUTE_REFACTORING_PLAN.md`
2. **éƒ¨ç½²æ¸…å•**: `DEPLOYMENT_CHECKLIST.md`
3. **æœ¬æ–‡æ¡£**: `ROUTE_REFACTORING_SUMMARY.md`

---

**é¡¹ç›®å®Œæˆæ—¥æœŸ**: 2026-02-15  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**ä¸‹æ¬¡å®¡æ ¸**: 2026-03-15
